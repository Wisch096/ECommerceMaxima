<section class="grid" style="gap:16px">
  <header class="card" style="padding:16px; display:flex; align-items:center; gap:12px;">
    <h2 style="margin:0; font-size:20px;">Produtos</h2>
    <div class="spacer"></div>
    <button type="button" class="btn btn-primary" (click)="goNew()">+ Novo Produto</button>
  </header>

  <form class="card" (ngSubmit)="fetch()" style="padding:16px;">
    <div class="toolbar">
      <input class="input" type="text" [(ngModel)]="search" name="search" placeholder="Buscar por código/descrição" />
      <select class="select" [(ngModel)]="departmentCode" name="departmentCode">
        <option value="">Todos departamentos</option>
        <option *ngFor="let d of departments" [value]="d.code">{{ d.code }} - {{ d.description }}</option>
      </select>
      <select class="select" [(ngModel)]="isActive" name="isActive">
        <option [ngValue]="''">Todos status</option>
        <option [ngValue]="true">Ativo</option>
        <option [ngValue]="false">Inativo</option>
      </select>
      <span class="spacer"></span>
      <button type="submit" class="btn btn">Filtrar</button>
      <button type="button" class="btn btn-ghost" (click)="resetFilters()">Limpar</button>
    </div>
  </form>

  <div class="table-wrapper">
    <table class="table">
      <thead>
        <tr>
          <th>Código</th>
          <th>Descrição</th>
          <th>Departamento</th>
          <th>Preço</th>
          <th>Status</th>
          <th style="width:160px">Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of items">
          <td>{{ p.code }}</td>
          <td>{{ p.description }}</td>
          <td>{{ p.departmentCode }}</td>
          <td>{{ p.price | number:'1.2-2' }}</td>
          <td>
            <span class="badge" [ngClass]="p.isActive ? 'badge-success' : 'badge-danger' ">
              {{ p.isActive ? 'Ativo' :  'Inativo'}}
            </span>
          </td>
          <td>
            <div style="display:flex; gap:8px;">
              <button type="button" class="btn " (click)="goEdit(p.id)">Editar</button>
              <button type="button" class="btn btn-danger" (click)="confirmDelete(p.id)">Excluir</button>
            </div>
          </td>
        </tr>
        <tr *ngIf="items.length === 0">
          <td colspan="6" style="text-align:center; color:var(--color-muted); padding:16px;">Nenhum registro encontrado</td>
        </tr>
      </tbody>
    </table>
  </div>

  <footer style="display:flex; gap:12px; align-items:center; justify-content:flex-end;">
    <button class="btn" (click)="changePage(-1)">Anterior</button>
    <span style="color:var(--color-muted);">Página {{ page }} de {{ totalPages }}</span>
    <button class="btn" (click)="changePage(1)">Próxima</button>
  </footer>
</section>