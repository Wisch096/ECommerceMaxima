<section class="card">
  <h2>{{ isEdit ? 'Editar Produto' : 'Novo Produto' }}</h2>

  <form [formGroup]="form" (ngSubmit)="save()" novalidate>
    <div class="grid">
      <label>
        <span>Código</span>
        <input type="text" formControlName="code" [readonly]="isEdit" />
        <small *ngIf="form.get('code')?.invalid && form.get('code')?.touched">Código é obrigatório (máx 50)</small>
      </label>

      <label>
        <span>Descrição</span>
        <input type="text" formControlName="description" />
        <small *ngIf="form.get('description')?.invalid && form.get('description')?.touched">Descrição é obrigatória (máx 255)</small>
      </label>

      <label>
        <span>Departamento</span>
        <select formControlName="departmentCode">
          <option value="">Selecione...</option>
          <option *ngFor="let d of departments" [value]="d.code">{{ d.code }} - {{ d.description }}</option>
        </select>
        <small *ngIf="form.get('departmentCode')?.invalid && form.get('departmentCode')?.touched">Informe código de 3 dígitos</small>
      </label>

      <label>
        <span>Preço</span>
        <input type="number" formControlName="price" step="0.01" min="0" />
        <small *ngIf="form.get('price')?.invalid && form.get('price')?.touched">Preço deve ser ≥ 0</small>
      </label>

      <label class="check">
        <input type="checkbox" formControlName="isActive" /> Ativo
      </label>
    </div>

    <footer class="actions">
      <button type="submit">Salvar</button>
      <button type="button" (click)="cancel()">Cancelar</button>
    </footer>
  </form>
</section>